{"version":3,"file":"src_app_features_negotiations_negotiations_module_ts.js","mappings":"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","sources":["./src/app/features/negotiations/components/negotiation-page/negotiation-page.component.ts","./src/app/features/negotiations/components/negotiation-page/negotiation-page.component.html","./src/app/features/negotiations/negotiations-routing.module.ts","./src/app/features/negotiations/negotiations.component.ts","./src/app/features/negotiations/negotiations.component.html","./src/app/features/negotiations/negotiations.module.ts","./src/app/features/shared/components/submit-match/submit-match.component.ts","./src/app/features/shared/components/submit-match/submit-match.component.html","./node_modules/rxjs/dist/esm/internal/observable/interval.js"],"sourcesContent":["import { ConfirmationModalComponent } from './../../../shared/components/confirmation-modal/confirmation-modal.component';\r\nimport { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\n// #region NgRx/RxJs\r\n\r\nimport { select, Store } from '@ngrx/store';\r\nimport { Actions, ofType } from '@ngrx/effects';\r\nimport { Dictionary } from '@ngrx/entity';\r\nimport { interval, Subscription, combineLatest, BehaviorSubject } from 'rxjs';\r\nimport { filter, retry, take, takeUntil } from 'rxjs/operators';\r\nimport * as actions from 'src/app/core/helpers/index.actions';\r\nimport * as fromNegotiations from 'src/app/features/negotiations/negotiations.selectors';\r\nimport * as fromDashboard from 'src/app/features/dashboard/dashboard.selectors';\r\nimport * as fromAgents from 'src/app/core/ngrx/brokers/index';\r\nimport { matchActions } from 'src/app/core/ngrx/entities/match';\r\n\r\n// #endregion\r\n\r\n// #region Modal\r\n\r\nimport { MatLegacyDialog as MatDialog } from '@angular/material/legacy-dialog';\r\nimport { NegotiationUpdateModalComponent } from '../negotiation-update-modal/negotiation-update-modal.component';\r\nimport { SubmitMatchComponent } from 'src/app/features/shared/components/submit-match/submit-match.component';\r\n\r\n// #endregion\r\n\r\n// #region Types\r\n\r\nimport {\r\n    Broker,\r\n    BrokerNegotiation,\r\n    BrokerRequest,\r\n    Client,\r\n    IdName,\r\n    LotMatchDetails,\r\n    MatchItems,\r\n    User,\r\n} from 'src/app/core/models/queryModels';\r\nimport { AnimationDirection, LotMatch, LotMatchIteration, VerificationType } from 'src/app/core/models/viewModels';\r\n\r\n// #endregion\r\n\r\n// #region Other\r\n\r\nimport {\r\n    SUCCESS_ROUTE,\r\n    NEGOTIATING_ROOM_ROUTE,\r\n    NEGOTIATIONS_COMPLETED_ROUTE,\r\n    NEGOTIATION_EDIT_ROUTE,\r\n    verificationTypes,\r\n} from 'src/app/core/helpers/constants';\r\nimport { authSelectors } from '../../../../core/ngrx/reducers';\r\nimport { PaymentCheckModalComponent } from '../../../shared/components/payment-check-modal/payment-check-modal.component';\r\nimport { brokersSelectors } from 'src/app/core/ngrx/brokers/index';\r\nimport { brokersActions } from 'src/app/core/helpers/index.actions';\r\nimport { filterOutNegotiationDocument } from '../../../../core/helpers/brokerHelperFunctions';\r\n\r\n// #endregion\r\n\r\n@Component({\r\n    selector: 'app-negotiation-page',\r\n    templateUrl: './negotiation-page.component.html',\r\n    styleUrls: ['./negotiation-page.component.scss'],\r\n})\r\nexport class NegotiationPageComponent implements OnInit, OnDestroy {\r\n    lotMatchId: number;\r\n    lotMatch: LotMatch;\r\n    matchIterations: LotMatchIteration[] = [];\r\n    selectedIteration: number = 0;\r\n    activeNegotiationIds: number[];\r\n    negotiationIndex: number = 0;\r\n    lotDetails: LotMatchDetails;\r\n    oppLotDetails: LotMatchDetails;\r\n    matchItem: MatchItems;\r\n\r\n    isLoading: boolean = true;\r\n    isSubmitMatchActionLoading: boolean = false;\r\n    isDeclineNegotiationActionLoading: boolean = false;\r\n    isMatchAllLoading: boolean = false;\r\n    isFullMatch: boolean = false;\r\n    fromSuccess: boolean = true;\r\n    isLocked: boolean = false;\r\n    isComplete: boolean = false;\r\n    isPending: boolean = false;\r\n    submitModalIsOpen: boolean = false;\r\n\r\n    submittedSkuduMatch: boolean = false;\r\n    isSeller: boolean = false;\r\n\r\n    iterationInitialID: number = null;\r\n    iterationCurrentID: number = null;\r\n\r\n    verificationTypes: Dictionary<VerificationType> = verificationTypes;\r\n\r\n    //#region count down variables\r\n    countDownSubscription: Subscription;\r\n    dateNow = this.transformDateToUtcHelper(new Date());\r\n    dDay: Date;\r\n    milliSecondsInASecond: number = 1000;\r\n    hoursInADay: number = 24;\r\n    minutesInAnHour: number = 60;\r\n    SecondsInAMinute: number = 60;\r\n    timeDifference: number;\r\n    secondsToDday: number;\r\n    minutesToDday: number;\r\n    hoursToDday: number;\r\n    daysToDday: number;\r\n    //#endregion\r\n\r\n    user: User;\r\n    clientUid: string;\r\n    brokerClient: Client;\r\n    brokerAdminRole: boolean;\r\n    bindingNegotiationDocuments: BrokerNegotiation[];\r\n\r\n    hasAgentDict: { [key: string]: boolean };\r\n    counterPartyHasBroker: boolean = false;\r\n    hasActiveBroker: boolean = false;\r\n\r\n    toggleForBroker = new BehaviorSubject<boolean>(false);\r\n    agents: Broker[];\r\n\r\n    destroyed$: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private location: Location,\r\n        public dialog: MatDialog,\r\n        private actions$: Actions,\r\n        private store: Store<fromNegotiations.State>,\r\n        private router: Router,\r\n    ) {}\r\n\r\n    ngOnInit(): void {\r\n        this.fetchAgentInfoHelper();\r\n        this.fetchClientInfoHelper();\r\n        this.fetchAgentRequestHelper();\r\n        this.selectBindingNegotiationDocument();\r\n\r\n        this.route.params.pipe(take(1)).subscribe(({ id }) => {\r\n            id ? (this.lotMatchId = +id) : this.handleBack();\r\n            this.fetchBindingNegotiationDocumentHelper([this.lotMatchId]);\r\n        });\r\n\r\n        this.route.queryParams.pipe(take(1)).subscribe(({ fromSuccess, isPending }) => {\r\n            if (fromSuccess) {\r\n                this.fromSuccess = true;\r\n            }\r\n            if (isPending) {\r\n                this.isPending = isPending === 'true';\r\n            }\r\n        });\r\n\r\n        combineLatest([this.route.queryParams, this.toggleForBroker])\r\n            .pipe(takeUntil(this.destroyed$))\r\n            .subscribe(([{ notificationUids }, toggleForBroker]) => {\r\n                const props = toggleForBroker\r\n                    ? { notificationUids, toggleForAgent: toggleForBroker }\r\n                    : { notificationUids };\r\n                this.store.dispatch(actions.notificationActions.ReqToggleNotificationStatus({ ...props }));\r\n            });\r\n\r\n        this.route.url.pipe(take(1)).subscribe(() => {\r\n            if (this.route.snapshot.url[0].path === 'view' && !this.isPending) {\r\n                this.isComplete = true;\r\n            }\r\n        });\r\n\r\n        this.actions$\r\n            .pipe(\r\n                ofType(actions.matchActions.LotMatchFormDataSuccess, actions.matchActions.LotMatchFormDataFail),\r\n                take(1),\r\n            )\r\n            .subscribe((action$) => {\r\n                this.checkSubmittedHelper();\r\n\r\n                action$.type === actions.matchActions.LotMatchFormDataSuccess.type\r\n                    ? this.handleChangeIteration()\r\n                    : this.handleBack();\r\n                this.isLoading = false;\r\n            });\r\n\r\n        this.store\r\n            .pipe(\r\n                select(fromNegotiations.getLotMatchFormData),\r\n                takeUntil(this.destroyed$),\r\n                filter((x) => !!x.lotMatchIterations[0]),\r\n                take(1),\r\n            )\r\n            .subscribe(({ lotMatchIterations }) => {\r\n                this.iterationInitialID === null && (this.iterationInitialID = lotMatchIterations[0].id);\r\n\r\n                this.store.dispatch(\r\n                    actions.cropActions.ReqCropMonthsAndGrades({\r\n                        cropId: lotMatchIterations[0].buyerDetails.crop.id,\r\n                        exchangeId: lotMatchIterations[0].buyerDetails.exchange.id || 1,\r\n                    }),\r\n                );\r\n            });\r\n\r\n        this.store\r\n            .pipe(select(fromAgents.brokersSelectors.getFilteredBrokers), takeUntil(this.destroyed$))\r\n            .subscribe((response) => {\r\n                if (!response) {\r\n                    this.store.dispatch(fromAgents.brokersActions.ReqBrokersAndDistance_Shared({ user: this.user }));\r\n                    this.store.dispatch(\r\n                        fromAgents.brokersActions.ReqClientBrokerRequests_Client({ uid: this.user.uid }),\r\n                    );\r\n                }\r\n                if (response?.activeBroker) {\r\n                    this.hasActiveBroker = response.activeBroker ? true : false;\r\n                }\r\n            });\r\n\r\n        this.store\r\n            .pipe(select(fromNegotiations.getLotMatchFormData), takeUntil(this.destroyed$))\r\n            .subscribe(({ lotMatchIterations }) => {\r\n                this.matchIterations = lotMatchIterations;\r\n\r\n                if (this.matchIterations?.length) {\r\n                    this.isLocked = !!this.matchIterations[0].completedDate;\r\n\r\n                    this.dDay = this.matchIterations[this.selectedIteration].completedDate;\r\n                    if (this.dDay) {\r\n                        this.dDay = this.transformTimerDateHelper(this.dDay);\r\n\r\n                        const dateDiff = (this.dateNow.getTime() - this.dDay.getTime()) / 3600000;\r\n\r\n                        if (dateDiff > 0) {\r\n                            this.isLocked = false;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n        this.actions$\r\n            .pipe(ofType(matchActions.ReqLotHasBrokerCheckSuccess, matchActions.ReqLotHasBrokerCheckFail), take(1))\r\n            .subscribe((payload) => {\r\n                if (payload.type === matchActions.ReqLotHasBrokerCheckSuccess.type) {\r\n                    this.hasAgentDict = payload;\r\n                    this.counterPartyHasBroker =\r\n                        this.hasAgentDict[\r\n                            this.isSeller ? this.lotMatch.buyerDetails.lotId : this.lotMatch.sellerDetails.lotId\r\n                        ];\r\n                }\r\n            });\r\n\r\n        this.store.dispatch(\r\n            actions.matchActions.ReqLotMatchFormData({ lotMatchId: this.lotMatchId, clientUid: this.clientUid }),\r\n        );\r\n\r\n        this.store.dispatch(\r\n            actions.negotiationActions.ReqGetAvailableMatchIds({\r\n                lotMatchId: this.lotMatchId,\r\n                clientUid: this.clientUid,\r\n            }),\r\n        );\r\n\r\n        this.store\r\n            .pipe(select(fromDashboard.negotiationSelector.getLotMatchIds), takeUntil(this.destroyed$))\r\n            .subscribe((lotMatchIds: number[]) => {\r\n                if (lotMatchIds.length) {\r\n                    this.activeNegotiationIds = lotMatchIds;\r\n                    this.negotiationIndex = this.activeNegotiationIds.indexOf(this.lotMatchId);\r\n                }\r\n            });\r\n\r\n        this.countDownSubscription = interval(1000)\r\n            .pipe(takeUntil(this.destroyed$))\r\n            .subscribe((x) => {\r\n                this.getTimeDifferenceHelper();\r\n            });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroyed$.next();\r\n        this.countDownSubscription.unsubscribe();\r\n    }\r\n\r\n    handleBack() {\r\n        this.isComplete\r\n            ? this.router.navigate([NEGOTIATIONS_COMPLETED_ROUTE])\r\n            : this.fromSuccess\r\n            ? this.router.navigate([NEGOTIATING_ROOM_ROUTE])\r\n            : this.location.back();\r\n    }\r\n\r\n    handleToggleNegotiations(direction: AnimationDirection) {\r\n        if (this.activeNegotiationIds.length > 1) {\r\n            const activeNegotiationsLength = this.activeNegotiationIds.length - 1;\r\n            if (direction === 'previous') {\r\n                this.negotiationIndex === 0\r\n                    ? (this.negotiationIndex = activeNegotiationsLength)\r\n                    : (this.negotiationIndex -= 1);\r\n            } else {\r\n                this.negotiationIndex === activeNegotiationsLength\r\n                    ? (this.negotiationIndex = 0)\r\n                    : (this.negotiationIndex += 1);\r\n            }\r\n            this.lotMatchId = this.activeNegotiationIds[this.negotiationIndex];\r\n            this.changeActiveNegotiationHelper();\r\n            this.router.navigate([`${NEGOTIATION_EDIT_ROUTE}/${this.activeNegotiationIds[this.negotiationIndex]}`]);\r\n        }\r\n    }\r\n\r\n    handleOpenUpdateModal() {\r\n        this.dialog.open(NegotiationUpdateModalComponent);\r\n    }\r\n\r\n    handleChangeIteration() {\r\n        this.lotMatch = {\r\n            id: this.matchIterations[this.selectedIteration].lotMatchId,\r\n            userType: this.matchIterations[this.selectedIteration].userType,\r\n            completedDate: this.matchIterations[this.selectedIteration].completedDate,\r\n            lotName: this.matchIterations[this.selectedIteration].lotName,\r\n            sellerDetails: this.matchIterations[this.selectedIteration].sellerDetails,\r\n            buyerDetails: this.matchIterations[this.selectedIteration].buyerDetails,\r\n        };\r\n        let lotId = this.isSeller ? this.lotMatch.buyerDetails.lotId : this.lotMatch.sellerDetails.lotId;\r\n        this.store.dispatch(matchActions.ReqLotHasBrokerCheck({ lotIds: [lotId] }));\r\n    }\r\n\r\n    handleSaveIteration() {\r\n        this.isSubmitMatchActionLoading = true;\r\n        const lotMatch = this.lotMatch;\r\n        this.store.dispatch(actions.matchActions.ReqUpdateLotMatch({ lotMatch }));\r\n\r\n        this.actions$\r\n            .pipe(ofType(actions.matchActions.UpdateLotMatchSuccess, actions.matchActions.UpdateLotMatchFail), take(1))\r\n            .subscribe(() => {\r\n                this.isSubmitMatchActionLoading = false;\r\n            });\r\n    }\r\n\r\n    handleOpenSubmitYourMatchModal() {\r\n        this.store.dispatch(\r\n            actions.matchActions.ReqLotMatchFormData({ lotMatchId: this.lotMatchId, clientUid: this.clientUid }),\r\n        );\r\n\r\n        this.actions$\r\n            .pipe(ofType(actions.matchActions.LotMatchFormDataSuccess), takeUntil(this.destroyed$))\r\n            .subscribe(({ lotMatchIterations }) => {\r\n                this.iterationCurrentID = lotMatchIterations[lotMatchIterations.length - 1].id;\r\n\r\n                if (this.iterationInitialID === this.iterationCurrentID) {\r\n                    if (!this.submitModalIsOpen) {\r\n                        const dialogRef = this.dialog.open(SubmitMatchComponent, {\r\n                            panelClass: 'g-modal-fullwidth-transparent-container',\r\n                        });\r\n\r\n                        this.submitModalIsOpen = true;\r\n\r\n                        dialogRef\r\n                            .afterClosed()\r\n                            .pipe(take(1))\r\n                            .subscribe(({ shouldDispatch }) => {\r\n                                if (shouldDispatch) {\r\n                                    this.submitFullMatchHelper();\r\n                                }\r\n                                this.submitModalIsOpen = false;\r\n                            });\r\n                    }\r\n                } else {\r\n                    this.handleOpenUpdateModal();\r\n                }\r\n            });\r\n    }\r\n\r\n    handleOpenPaymentCheckModal(\r\n        paymentReady: boolean,\r\n        currentUserSubmitted?: boolean,\r\n        counterPartySubmitted?: boolean,\r\n    ): void {\r\n        const dialogRef = this.dialog.open(PaymentCheckModalComponent, {\r\n            panelClass: 'g-modal-container',\r\n            data: {\r\n                metricTons: this.lotMatch.buyerDetails.quantity,\r\n                paymentStepReady: paymentReady,\r\n                paymentComplete: false,\r\n                counterPartySubmitted: counterPartySubmitted,\r\n                currentUserSubmitted: currentUserSubmitted,\r\n            },\r\n        });\r\n\r\n        dialogRef.afterClosed().subscribe((result: boolean) => {\r\n            if (result) {\r\n                this.routeToSuccessPageHelper();\r\n            }\r\n        });\r\n    }\r\n\r\n    handleDeclineNegotiation() {\r\n        const dialogRef = this.dialog.open(ConfirmationModalComponent, {\r\n            data: { currentAction: 'decline', currentItem: 'negotiation' },\r\n            panelClass: 'g-modal-container',\r\n        });\r\n\r\n        dialogRef\r\n            .afterClosed()\r\n            .pipe(take(1))\r\n            .subscribe((shouldDispatch) => {\r\n                if (shouldDispatch) {\r\n                    this.isDeclineNegotiationActionLoading = true;\r\n                    this.actions$\r\n                        .pipe(\r\n                            ofType(\r\n                                actions.negotiationActions.DeclineNegotiationSuccess,\r\n                                actions.negotiationActions.DeclineNegotiationFail,\r\n                            ),\r\n                            take(1),\r\n                        )\r\n                        .subscribe((action) => {\r\n                            if (\r\n                                action.type === actions.negotiationActions.DeclineNegotiationSuccess.type &&\r\n                                action.activeNegotiationIds.length >= 1\r\n                            ) {\r\n                                this.lotMatchId = action.activeNegotiationIds[this.negotiationIndex];\r\n                                this.changeActiveNegotiationHelper();\r\n                            }\r\n                            this.isDeclineNegotiationActionLoading = false;\r\n                        });\r\n\r\n                    this.store.dispatch(\r\n                        actions.negotiationActions.ReqDeclineNegotiation({\r\n                            lotMatch: this.lotMatch,\r\n                            activeNegotiationIds: this.activeNegotiationIds,\r\n                        }),\r\n                    );\r\n                }\r\n            });\r\n    }\r\n\r\n    handleMatchAll() {\r\n        this.isMatchAllLoading = true;\r\n        if (this.lotMatch.userType === 'Sell') {\r\n            this.lotDetails = this.lotMatch.sellerDetails;\r\n            this.oppLotDetails = this.lotMatch.buyerDetails;\r\n            this.lotMatch = { ...this.lotMatch, sellerDetails: this.matchDetailsHelper() };\r\n        } else {\r\n            this.lotDetails = this.lotMatch.buyerDetails;\r\n            this.oppLotDetails = this.lotMatch.sellerDetails;\r\n            this.lotMatch = { ...this.lotMatch, buyerDetails: this.matchDetailsHelper() };\r\n        }\r\n        this.actions$\r\n            .pipe(ofType(actions.matchActions.UpdateLotMatchSuccess, actions.matchActions.UpdateLotMatchFail), take(1))\r\n            .subscribe(() => {\r\n                this.isMatchAllLoading = false;\r\n            });\r\n        this.store.dispatch(actions.matchActions.ReqUpdateLotMatch({ lotMatch: this.lotMatch }));\r\n    }\r\n\r\n    matchDetailsHelper() {\r\n        return {\r\n            ...this.oppLotDetails,\r\n            id: this.lotDetails.id,\r\n            userVerificationId: this.lotDetails.userVerificationId,\r\n            lotId: this.lotDetails.lotId,\r\n        };\r\n    }\r\n\r\n    submitFullMatchHelper() {\r\n        this.isSubmitMatchActionLoading = true;\r\n\r\n        this.actions$.pipe(ofType(actions.negotiationActions.CompleteNegotiationSuccess), take(1)).subscribe(() => {\r\n            this.isSubmitMatchActionLoading = false;\r\n            const lotIds = [\r\n                this.lotMatch.userType === 'Sell'\r\n                    ? this.lotMatch.sellerDetails.lotId\r\n                    : this.lotMatch.buyerDetails.lotId,\r\n            ];\r\n            this.store.dispatch(actions.lotActions.ReqPrivatiseLots({ lotIds }));\r\n            if (this.hasActiveBroker || this.user.isBroker) {\r\n                this.createCorrectNegotiationDocument();\r\n            } else if (!this.hasActiveBroker && this.counterPartyHasBroker && !this.user.isBroker) {\r\n                this.createShallowNegotiationDocument();\r\n                this.routeToSuccessPageHelper();\r\n            } else {\r\n                this.routeToSuccessPageHelper();\r\n            }\r\n        });\r\n\r\n        this.actions$.pipe(ofType(actions.negotiationActions.CompleteNegotiationFail), take(1)).subscribe(() => {\r\n            this.isSubmitMatchActionLoading = false;\r\n        });\r\n\r\n        this.store.dispatch(\r\n            actions.negotiationActions.ReqCompleteNegotiation({\r\n                lotMatch: this.lotMatch,\r\n                clientHasBroker: this.hasActiveBroker,\r\n                counterPartyHasBroker: this.counterPartyHasBroker,\r\n            }),\r\n        );\r\n    }\r\n\r\n    createShallowNegotiationDocument(): void {\r\n        let bindingDocument: BrokerNegotiation;\r\n        const bindingNegotiationDocument = filterOutNegotiationDocument(\r\n            this.lotMatchId,\r\n            this.bindingNegotiationDocuments,\r\n        );\r\n\r\n        if (bindingNegotiationDocument) {\r\n            bindingDocument = { ...bindingNegotiationDocument };\r\n            if (this.lotMatch.userType === 'Sell') {\r\n                bindingDocument.sellerEmail = `${this.user.email} - No Broker`;\r\n                bindingDocument.sellerPaid = true;\r\n            } else {\r\n                bindingDocument.buyerEmail = `${this.user.email} - No Broker`;\r\n                bindingDocument.buyerPaid = true;\r\n            }\r\n\r\n            this.store.dispatch(\r\n                actions.brokersActions.ReqUpdateNegotiationDocument({ brokerNegotiation: bindingDocument }),\r\n            );\r\n        } else {\r\n            bindingDocument = {\r\n                lotMatchId: this.lotMatchId,\r\n                buyerEmail: this.lotMatch.userType === 'Buy' ? `${this.user.email} - No Broker` : null,\r\n                buyerPaid: false,\r\n                sellerEmail: this.lotMatch.userType === 'Sell' ? `${this.user.email} - No Broker` : null,\r\n                sellerPaid: false,\r\n                emailSent: false,\r\n            };\r\n\r\n            this.store.dispatch(actions.brokersActions.ReqCreateNegotiationDocument({ ...bindingDocument }));\r\n        }\r\n    }\r\n\r\n    createCorrectNegotiationDocument(): void {\r\n        let bindingDocument: BrokerNegotiation;\r\n        const bindingNegotiationDocument = filterOutNegotiationDocument(\r\n            this.lotMatchId,\r\n            this.bindingNegotiationDocuments,\r\n        );\r\n\r\n        if (bindingNegotiationDocument) {\r\n            bindingDocument = { ...bindingNegotiationDocument };\r\n            if (this.lotMatch.userType === 'Sell') {\r\n                bindingDocument.sellerEmail = this.returnUserOrClientEmailHelper();\r\n                bindingDocument.sellerPaid = false;\r\n            } else {\r\n                bindingDocument.buyerEmail = this.returnUserOrClientEmailHelper();\r\n                bindingDocument.buyerPaid = false;\r\n            }\r\n\r\n            this.store.dispatch(\r\n                actions.brokersActions.ReqUpdateNegotiationDocument({ brokerNegotiation: bindingDocument }),\r\n            );\r\n        } else {\r\n            if ((this.hasActiveBroker || this.user.isBroker) && !this.counterPartyHasBroker) {\r\n                bindingDocument = {\r\n                    lotMatchId: this.lotMatchId,\r\n                    buyerEmail: this.lotMatch.userType === 'Buy' ? this.returnUserOrClientEmailHelper() : null,\r\n                    buyerPaid: this.lotMatch.userType === 'Buy' ? false : true,\r\n                    sellerEmail: this.lotMatch.userType === 'Sell' ? this.returnUserOrClientEmailHelper() : null,\r\n                    sellerPaid: this.lotMatch.userType === 'Sell' ? false : true,\r\n                    emailSent: false,\r\n                };\r\n            } else if ((this.hasActiveBroker || this.user.isBroker) && this.counterPartyHasBroker) {\r\n                bindingDocument = {\r\n                    lotMatchId: this.lotMatchId,\r\n                    buyerEmail: this.lotMatch.userType === 'Buy' ? this.returnUserOrClientEmailHelper() : null,\r\n                    buyerPaid: false,\r\n                    sellerEmail: this.lotMatch.userType === 'Sell' ? this.returnUserOrClientEmailHelper() : null,\r\n                    sellerPaid: false,\r\n                    emailSent: false,\r\n                };\r\n            }\r\n\r\n            this.store.dispatch(actions.brokersActions.ReqCreateNegotiationDocument({ ...bindingDocument }));\r\n        }\r\n\r\n        this.triggerPaymentCheckModalHelper(bindingDocument);\r\n    }\r\n\r\n    triggerPaymentCheckModalHelper(bindingDocument: BrokerNegotiation): void {\r\n        const currentUserSubmitted =\r\n            (this.lotMatch.userType === 'Buy' && bindingDocument.buyerPaid !== null) ||\r\n            (this.lotMatch.userType === 'Sell' && bindingDocument.sellerEmail !== null);\r\n        const counterPartySubmitted =\r\n            (this.lotMatch.userType === 'Buy' && bindingDocument.sellerEmail !== null) ||\r\n            (this.lotMatch.userType === 'Sell' && bindingDocument.buyerEmail !== null);\r\n\r\n        if (bindingDocument.sellerEmail && bindingDocument.buyerEmail) {\r\n            this.handleOpenPaymentCheckModal(true, currentUserSubmitted, counterPartySubmitted);\r\n        } else {\r\n            this.handleOpenPaymentCheckModal(false, currentUserSubmitted, counterPartySubmitted);\r\n        }\r\n    }\r\n\r\n    returnUserOrClientEmailHelper(): string {\r\n        if (this.user.isBroker) {\r\n            return this.brokerClient.email;\r\n        } else {\r\n            return this.user.email;\r\n        }\r\n    }\r\n\r\n    handleGetMatch(item) {\r\n        if (item) {\r\n            this.isFullMatch = item.isFullMatch;\r\n            this.lotMatch = item.lotMatch;\r\n        }\r\n    }\r\n\r\n    routeToSuccessPageHelper(): void {\r\n        this.hasOpposingPartySubmittedMatchHelper()\r\n            ? this.router.navigate([`${SUCCESS_ROUTE}/${this.lotMatchId}`], {\r\n                  queryParams: { hasOpposingPartySubmitted: true },\r\n              })\r\n            : this.router.navigate([`${SUCCESS_ROUTE}/${this.lotMatchId}`]);\r\n    }\r\n\r\n    checkSubmittedHelper() {\r\n        this.isSeller = this.matchIterations[this.selectedIteration].userType === 'Sell';\r\n        this.submittedSkuduMatch = this.isSeller\r\n            ? this.matchIterations[this.selectedIteration].hasSellerSubmittedMatch\r\n            : this.matchIterations[this.selectedIteration].hasBuyerSubmittedMatch;\r\n    }\r\n\r\n    changeActiveNegotiationHelper() {\r\n        this.isLoading = true;\r\n\r\n        this.actions$.pipe(ofType(actions.matchActions.LotMatchFormDataSuccess), take(1)).subscribe(() => {\r\n            this.handleChangeIteration();\r\n            this.isLoading = false;\r\n        });\r\n\r\n        this.store.dispatch(\r\n            actions.matchActions.ReqLotMatchFormData({ lotMatchId: this.lotMatchId, clientUid: this.clientUid }),\r\n        );\r\n    }\r\n\r\n    getTimeDifferenceHelper() {\r\n        if (this.dDay) {\r\n            this.timeDifference = this.dDay.getTime() - new Date().getTime();\r\n            this.allocateTimeUnitsHelper(this.timeDifference);\r\n        } else {\r\n            this.isLocked = false;\r\n        }\r\n    }\r\n\r\n    allocateTimeUnitsHelper(timeDifference: number) {\r\n        this.secondsToDday = Math.floor((timeDifference / this.milliSecondsInASecond) % this.SecondsInAMinute);\r\n        this.minutesToDday = Math.floor(\r\n            (timeDifference / (this.milliSecondsInASecond * this.minutesInAnHour)) % this.SecondsInAMinute,\r\n        );\r\n        this.hoursToDday = Math.floor(\r\n            (timeDifference / (this.milliSecondsInASecond * this.minutesInAnHour * this.SecondsInAMinute)) %\r\n                this.hoursInADay,\r\n        );\r\n        this.daysToDday = Math.floor(\r\n            timeDifference /\r\n                (this.milliSecondsInASecond * this.minutesInAnHour * this.SecondsInAMinute * this.hoursInADay),\r\n        );\r\n    }\r\n\r\n    compareSelectionsHelper(selection1: IdName, selection2: IdName) {\r\n        return selection1.id === selection2?.id;\r\n    }\r\n\r\n    transformDateToUtcHelper(date: Date) {\r\n        let newDate = date;\r\n        newDate.setHours(newDate.getHours() + 2);\r\n        return newDate;\r\n    }\r\n\r\n    transformTimerDateHelper(date: Date) {\r\n        let newDate = date;\r\n        newDate?.setHours(newDate.getHours() + 24);\r\n        return newDate;\r\n    }\r\n\r\n    hasOpposingPartySubmittedMatchHelper() {\r\n        return this['matchIterations'][0][`has${this.isSeller ? 'Buyer' : 'Seller'}SubmittedMatch`];\r\n    }\r\n\r\n    fetchAgentInfoHelper(): void {\r\n        this.store\r\n            .select(authSelectors.getUser)\r\n            .pipe(takeUntil(this.destroyed$))\r\n            .subscribe((user: User) => {\r\n                this.user = user;\r\n\r\n                this.user.isBroker ? this.toggleForBroker.next(true) : this.toggleForBroker.next(false);\r\n            });\r\n    }\r\n\r\n    fetchClientInfoHelper(): void {\r\n        this.store\r\n            .select(brokersSelectors.getCurrentClient)\r\n            .pipe(takeUntil(this.destroyed$))\r\n            .subscribe((client: Client) => {\r\n                this.clientUid = client ? client.uid : null;\r\n                this.brokerClient = client;\r\n            });\r\n    }\r\n\r\n    selectBindingNegotiationDocument(): void {\r\n        this.store\r\n            .select(brokersSelectors.getNegotiationDocuments)\r\n            .pipe(takeUntil(this.destroyed$))\r\n            .subscribe((negotiationDocs: BrokerNegotiation[]) => {\r\n                this.bindingNegotiationDocuments = negotiationDocs;\r\n            });\r\n    }\r\n\r\n    fetchBindingNegotiationDocumentHelper(lotMatchIds: number[]): void {\r\n        this.store.dispatch(brokersActions.ReqGetBrokerNegotiationDocuments({ lotMatchIds: lotMatchIds }));\r\n    }\r\n\r\n    fetchAgentRequestHelper(): void {\r\n        this.store\r\n            .select(brokersSelectors.getBrokerRequest)\r\n            .pipe(takeUntil(this.destroyed$))\r\n            .subscribe((agentRequest: BrokerRequest) => {\r\n                this.brokerAdminRole = agentRequest?.brokerAdminRole;\r\n            });\r\n    }\r\n}\r\n","<div class=\"l-container g-fade-in-right\">\r\n    <!-- #region Page Header -->\r\n\r\n    <div class=\"l-header\">\r\n        <img\r\n            class=\"l-back-icon ml-4\"\r\n            src=\"./assets/icons/back-arrow-icon.svg\"\r\n            alt=\"back-arrow-icon\"\r\n            (click)=\"handleBack()\"\r\n        />\r\n        <h2 class=\"g-text-h2-dark\">\r\n            {{ isPending ? 'Pending Match' : isComplete ? 'Match' : \"Let's Negotiate\" }}\r\n        </h2>\r\n    </div>\r\n\r\n    <!-- #endregion -->\r\n\r\n    <!-- #region Content -->\r\n\r\n    <div class=\"l-content\">\r\n        <div class=\"l-sub-header\">\r\n            <div *ngIf=\"!isLocked\" class=\"l-match-banner\">\r\n                <p class=\"g-text-h2-dark l-blue\">This Lot was matched</p>\r\n            </div>\r\n            <div *ngIf=\"isLocked\" class=\"l-timer-banner\">\r\n                <p class=\"g-text-h2-dark l-blue\">This Lot is Locked</p>\r\n                <div class=\"l-timer g-text-h2\">\r\n                    <span class=\"l-time-remaining\">Time Remaining: </span>\r\n                    <span id=\"hours\" class=\"l-time\">{{ hoursToDday }}</span\r\n                    >:<span id=\"minutes\" class=\"l-time\">{{ minutesToDday }}</span\r\n                    >:<span id=\"seconds\" class=\"l-time\">{{ secondsToDday }}</span>\r\n                </div>\r\n\r\n                <div class=\"l-info-container\">\r\n                    <p class=\"l-form-info-p m-0\">\r\n                        <img\r\n                            class=\"l-form-info-icon\"\r\n                            src=\"./assets/icons/info-icon-white.svg\"\r\n                            alt=\"info-icon-grey\"\r\n                        />This Lot is currently in another negotiation.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"l-lotmatch\" [class.l-fill]=\"isLoading\">\r\n            <!-- #region Loading Spinner -->\r\n\r\n            <div *ngIf=\"isLoading; else showLotMatchAndVerification\">\r\n                <mat-progress-spinner\r\n                    class=\"g-mat-progress-spinner-blue\"\r\n                    mode=\"indeterminate\"\r\n                    [diameter]=\"40\"\r\n                ></mat-progress-spinner>\r\n            </div>\r\n\r\n            <!-- #endregion -->\r\n\r\n            <ng-template #showLotMatchAndVerification>\r\n                <!-- #region Lot Match -->\r\n\r\n                <app-lot-match-table\r\n                    [lotMatch]=\"lotMatch\"\r\n                    [isNegotiation]=\"true\"\r\n                    [isLocked]=\"isLocked\"\r\n                    [hasAgent]=\"counterPartyHasBroker\"\r\n                    [isPending]=\"\r\n                        matchIterations[selectedIteration].hasSellerSubmittedMatch ||\r\n                        matchIterations[selectedIteration].hasBuyerSubmittedMatch\r\n                    \"\r\n                    ($isFullMatchEvent)=\"handleGetMatch($event)\"\r\n                ></app-lot-match-table>\r\n\r\n                <!-- #endregion -->\r\n\r\n                <div *ngIf=\"(!isComplete && !isPending && !isFullMatch) || isMatchAllLoading\">\r\n                    <button mat-flat-button class=\"g-secondary-button mt-2\" (click)=\"handleMatchAll()\">\r\n                        <ng-container *ngIf=\"isMatchAllLoading; else showMatchAll\">\r\n                            <mat-progress-spinner\r\n                                class=\"g-mat-progress-spinner-blue mx-auto\"\r\n                                mode=\"indeterminate\"\r\n                                [diameter]=\"30\"\r\n                            ></mat-progress-spinner>\r\n                        </ng-container>\r\n                        <ng-template #showMatchAll><span class=\"l-match-all\"> Match All </span></ng-template>\r\n                    </button>\r\n                </div>\r\n\r\n                <!-- #region Verification Badge -->\r\n\r\n                <div class=\"l-verification-badge-container\">\r\n                    <app-verification-badge\r\n                        [verificationTypes]=\"verificationTypes\"\r\n                        [verificationId]=\"\r\n                            isSeller\r\n                                ? lotMatch.buyerDetails.userVerificationId\r\n                                : lotMatch.sellerDetails.userVerificationId\r\n                        \"\r\n                    ></app-verification-badge>\r\n                </div>\r\n\r\n                <!-- #endregion -->\r\n            </ng-template>\r\n        </div>\r\n\r\n        <!-- #endregion -->\r\n    </div>\r\n\r\n    <!-- #endregion -->\r\n\r\n    <!-- #region Buttons -->\r\n\r\n    <div *ngIf=\"!isComplete && !isPending\" class=\"l-buttons-container l-end\">\r\n        <div\r\n            *ngIf=\"activeNegotiationIds?.length > 1\"\r\n            class=\"l-chevron-holder\"\r\n            (click)=\"handleToggleNegotiations('previous')\"\r\n        >\r\n            <img class=\"l-chevron-icon-left\" src=\"./assets/icons/chevron-blue.svg\" alt=\"toggle-left\" />\r\n        </div>\r\n\r\n        <ng-container *ngIf=\"!isLocked && !isComplete && !submittedSkuduMatch; else showDisabled\">\r\n            <div class=\"l-button-and-text\">\r\n                <p class=\"g-text-p-small-grey text-center mb-2\">\r\n                    {{ negotiationIndex + 1 }} of {{ activeNegotiationIds?.length }} Negotiations\r\n                </p>\r\n                <div\r\n                    class=\"l-button-group l-height-content\"\r\n                    ngClass=\"{{ activeNegotiationIds?.length > 1 ? 'px-2' : 'px-0' }}\"\r\n                >\r\n                    <button\r\n                        mat-flat-button\r\n                        [disabled]=\"user.isBroker && !brokerAdminRole\"\r\n                        [class.g-disabled-button]=\"user.isBroker && !brokerAdminRole\"\r\n                        class=\"g-primary-button\"\r\n                        ngClass=\"{{ isFullMatch ? 'l-height-content mb-2' : 'l-full-w-button' }}\"\r\n                        (click)=\"handleDeclineNegotiation()\"\r\n                    >\r\n                        <ng-container *ngIf=\"isDeclineNegotiationActionLoading; else showDecline\">\r\n                            <mat-progress-spinner\r\n                                class=\"g-mat-progress-spinner-blue mx-auto\"\r\n                                mode=\"indeterminate\"\r\n                                [diameter]=\"30\"\r\n                            ></mat-progress-spinner>\r\n                        </ng-container>\r\n                        <ng-template #showDecline> Decline </ng-template>\r\n                    </button>\r\n                    <button\r\n                        *ngIf=\"isFullMatch && !isMatchAllLoading\"\r\n                        mat-flat-button\r\n                        [disabled]=\"user.isBroker && !brokerAdminRole\"\r\n                        [class.g-disabled-button]=\"user.isBroker && !brokerAdminRole\"\r\n                        class=\"g-secondary-button l-height-content\"\r\n                        (click)=\"handleOpenSubmitYourMatchModal()\"\r\n                    >\r\n                        <ng-container *ngIf=\"isSubmitMatchActionLoading; else showSubmit\">\r\n                            <mat-progress-spinner\r\n                                class=\"g-mat-progress-spinner-blue mx-auto\"\r\n                                mode=\"indeterminate\"\r\n                                [diameter]=\"30\"\r\n                            ></mat-progress-spinner>\r\n                        </ng-container>\r\n                        <ng-template #showSubmit> Submit Match </ng-template>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <ng-template #showDisabled>\r\n            <div class=\"l-button-and-text\">\r\n                <div class=\"l-button-group l-height-content px-2\">\r\n                    <button mat-flat-button class=\"g-primary-button\" disabled>Decline</button>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n        <div\r\n            *ngIf=\"activeNegotiationIds?.length > 1\"\r\n            class=\"l-chevron-holder\"\r\n            (click)=\"handleToggleNegotiations('next')\"\r\n        >\r\n            <img class=\"l-chevron-icon-right\" src=\"./assets/icons/chevron-blue.svg\" alt=\"toggle-right\" />\r\n        </div>\r\n    </div>\r\n\r\n    <!-- #endregion -->\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { NegotiationsComponent } from './negotiations.component';\r\nimport { NegotiationPageComponent } from './components/negotiation-page/negotiation-page.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: NegotiationsComponent,\r\n        children: [\r\n            { path: 'edit/:id', component: NegotiationPageComponent },\r\n            { path: 'view/:id', component: NegotiationPageComponent },\r\n        ],\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule],\r\n})\r\nexport class NegotiationsRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-negotiations',\r\n  templateUrl: './negotiations.component.html',\r\n  styleUrls: ['./negotiations.component.scss']\r\n})\r\nexport class NegotiationsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"g-app-dimensions\">\r\n    <router-outlet></router-outlet>\r\n</div>\r\n","// #region Module Imports\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { NegotiationsRoutingModule } from './negotiations-routing.module';\r\nimport { AngularMaterialModule } from './../shared/angular-material.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { LotMatchTableModule } from '../shared/components/lot-match-table/lot-match-table.component';\r\n//import { AgmCoreModule } from '@diegomvh/agm-core';\r\n//import { GooglePlaceModule } from 'ngx-google-places-autocomplete';\r\nimport { SubmitMatchModule } from '../shared/components/submit-match/submit-match.component';\r\nimport { VerificationBadgeModule } from '../shared/components/verification-badge/verification-badge.component';\r\n\r\n// #endregion\r\n\r\n// #region Component Imports\r\n\r\nimport { NegotiationsComponent } from './negotiations.component';\r\nimport { NegotiationPageComponent } from './components/negotiation-page/negotiation-page.component';\r\nimport { NegotiationEditModalComponent } from './components/negotiation-edit-modal/negotiation-edit-modal.component';\r\nimport { NegotiationUpdateModalComponent } from './components/negotiation-update-modal/negotiation-update-modal.component';\r\n\r\n// #endregion\r\n\r\n// #region Other\r\n\r\nimport { NegotiationEffects } from './../../core/ngrx/entities/negotiations/negotiation.effects';\r\nimport { lotFeatureKey, lotReducer } from 'src/app/core/ngrx/entities/lot';\r\nimport { matchFeatureKey, matchReducer } from 'src/app/core/ngrx/entities/match';\r\nimport { negotiationFeatureKey, negotiationReducer } from 'src/app/core/ngrx/entities/negotiations';\r\nimport { MatchEffects } from 'src/app/core/ngrx/entities/match/match.effects';\r\nimport { LotEffects } from 'src/app/core/ngrx/entities/lot/lot.effects';\r\nimport { MAT_DATE_LOCALE } from '@angular/material/core';\r\nimport { GoogleMapsModule } from '@angular/google-maps';\r\nimport { NgxGpAutocompleteModule } from '@angular-magic/ngx-gp-autocomplete';\r\n\r\n// #endregion\r\n\r\n@NgModule({\r\n    declarations: [\r\n        NegotiationsComponent,\r\n        NegotiationPageComponent,\r\n        NegotiationEditModalComponent,\r\n        NegotiationUpdateModalComponent,\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        NegotiationsRoutingModule,\r\n        AngularMaterialModule,\r\n        FormsModule,\r\n        LotMatchTableModule,\r\n        SubmitMatchModule,\r\n        VerificationBadgeModule,\r\n        StoreModule.forFeature(lotFeatureKey, lotReducer),\r\n        StoreModule.forFeature(matchFeatureKey, matchReducer),\r\n        StoreModule.forFeature(negotiationFeatureKey, negotiationReducer),\r\n        EffectsModule.forFeature([LotEffects, MatchEffects, NegotiationEffects]),\r\n        /*\r\n        AgmCoreModule.forRoot({\r\n            apiKey: 'AIzaSyAPz_4c60V_PBTnACgcWOz2nVPKpyN8DT8',\r\n        }),*/\r\n        GoogleMapsModule,\r\n       // GooglePlaceModule,\r\n        NgxGpAutocompleteModule\r\n    ],\r\n    providers: [{ provide: MAT_DATE_LOCALE, useValue: 'en-GB' }],\r\n})\r\nexport class NegotiationsModule {}\r\n","import { Entity } from './../../../../core/models/queryModels';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Component, EventEmitter, NgModule, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatLegacyButtonModule as MatButtonModule } from '@angular/material/legacy-button';\r\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatStepper, MatStepperModule } from '@angular/material/stepper';\r\nimport { Router } from '@angular/router';\r\nimport { select, Store } from '@ngrx/store';\r\nimport * as fromRoot from 'src/app/features/dashboard/dashboard.selectors';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { submitMatchContent } from 'src/app/core/helpers/constants';\r\n\r\n@Component({\r\n    selector: 'app-submit-match',\r\n    templateUrl: './submit-match.component.html',\r\n    styleUrls: ['./submit-match.component.scss'],\r\n})\r\nexport class SubmitMatchComponent implements OnInit, OnDestroy {\r\n    entity: Entity[];\r\n    stepperData: string[] = submitMatchContent;\r\n\r\n    isLinear: boolean = true;\r\n    isFinalStep: boolean = false;\r\n    showMatch: boolean = false;\r\n\r\n    destroyed$: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    constructor(private router: Router, private dialogRef: MatDialogRef<SubmitMatchComponent>, private store: Store) {}\r\n\r\n    ngOnInit(): void {\r\n        this.store\r\n            .pipe(select(fromRoot.authSelectors.getUserEntities), takeUntil(this.destroyed$))\r\n            .subscribe((entity) => {\r\n                this.entity = entity;\r\n            });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroyed$.next();\r\n    }\r\n\r\n    @ViewChild('stepper') stepper: MatStepper;\r\n\r\n    handleBack() {\r\n        if (this.isFinalStep) {\r\n            this.isFinalStep = false;\r\n        }\r\n\r\n        this.stepper.previous();\r\n    }\r\n\r\n    handleNext() {\r\n        if (this.isFinalStepHelper()) {\r\n            this.closeModalAndDispatchHelper();\r\n        } else {\r\n            this.stepper.next();\r\n\r\n            if (this.isFinalStepHelper()) {\r\n                this.isFinalStep = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    closeModalAndDispatchHelper() {\r\n        this.dialogRef.close({ shouldDispatch: true });\r\n    }\r\n\r\n    handleCloseModal() {\r\n        this.dialogRef.close({ shouldDispatch: false });\r\n    }\r\n\r\n    isFinalStepHelper() {\r\n        return this.stepper.selectedIndex === this.stepperData.length - 1;\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    declarations: [SubmitMatchComponent],\r\n    imports: [CommonModule, MatStepperModule, MatIconModule, MatButtonModule],\r\n    exports: [SubmitMatchComponent],\r\n})\r\nexport class SubmitMatchModule {}\r\n","<div class=\"l-container\">\r\n    <!-- #region Content -->\r\n\r\n    <div class=\"l-modal\" cdkFocusInitial>\r\n        <div class=\"l-header\">\r\n            <img\r\n                *ngIf=\"stepper.selectedIndex !== 0\"\r\n                class=\"l-back\"\r\n                src=\"./assets/icons/black-arrow-back.svg\"\r\n                alt=\"back\"\r\n                (click)=\"handleBack()\"\r\n            />\r\n            <h2 class=\"g-text-h2-dark\"><b>Submit Match</b></h2>\r\n\r\n            <img class=\"l-close\" src=\"./assets/icons/close-icon-dark.svg\" alt=\"close\" (click)=\"handleCloseModal()\" />\r\n        </div>\r\n\r\n        <!-- #region Stepper -->\r\n\r\n        <mat-horizontal-stepper class=\"g-stepper-modal\" [linear]=\"isLinear\" #stepper>\r\n            <!-- #region Progress Icons -->\r\n\r\n            <ng-template matStepperIcon=\"edit\">\r\n                <mat-icon>done</mat-icon>\r\n            </ng-template>\r\n\r\n            <ng-template matStepperIcon=\"number\" let-index=\"index\">\r\n                <mat-icon>done</mat-icon>\r\n            </ng-template>\r\n\r\n            <!-- #endregion -->\r\n\r\n            <mat-step *ngFor=\"let stepData of stepperData\">\r\n                <div class=\"l-submit-content\">\r\n                    <p class=\"g-text-p-dark mb-2\">\r\n                        <b>Step {{ stepper.selectedIndex + 1 }}</b>\r\n                    </p>\r\n\r\n                    <p class=\"g-text-p-dark\">{{ stepData }}</p>\r\n\r\n                    <p *ngIf=\"stepper.selectedIndex === 0\" class=\"g-text-p-dark mb-1\">{{ entity[0].name }}</p>\r\n\r\n                    <div *ngIf=\"stepper.selectedIndex === 0\" class=\"d-flex align-items-start mt-2\">\r\n                        <img\r\n                            class=\"g-form-info-icon mt-1\"\r\n                            src=\"./assets/icons/info-icon-grey.svg\"\r\n                            alt=\"info-icon-grey\"\r\n                        />\r\n                        <p class=\"g-form-info-p l-black m-0\">\r\n                            Make sure your legal entity name is correct. You can change it on your\r\n                            <a href=\"dashboard/profile\">profile.</a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </mat-step>\r\n        </mat-horizontal-stepper>\r\n\r\n        <!-- #endregion -->\r\n\r\n        <!-- #region Button -->\r\n\r\n        <button mat-flat-button class=\"g-primary-button\" (click)=\"handleNext()\">\r\n            {{ isFinalStep ? 'Submit Match' : 'I Understand' }}\r\n        </button>\r\n\r\n        <!-- #endregion -->\r\n    </div>\r\n\r\n    <!-- #endregion -->\r\n</div>\r\n","import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period = 0, scheduler = asyncScheduler) {\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n"],"names":["ConfirmationModalComponent","EventEmitter","Location","ActivatedRoute","Router","select","Store","Actions","ofType","interval","combineLatest","BehaviorSubject","filter","take","takeUntil","actions","fromNegotiations","fromDashboard","fromAgents","matchActions","MatLegacyDialog","MatDialog","NegotiationUpdateModalComponent","SubmitMatchComponent","SUCCESS_ROUTE","NEGOTIATING_ROOM_ROUTE","NEGOTIATIONS_COMPLETED_ROUTE","NEGOTIATION_EDIT_ROUTE","verificationTypes","authSelectors","PaymentCheckModalComponent","brokersSelectors","brokersActions","filterOutNegotiationDocument","i0","elementStart","text","elementEnd","element","advance","textInterpolate","ctx_r1","hoursToDday","minutesToDday","secondsToDday","property","elementContainerStart","elementContainerEnd","listener","NegotiationPageComponent_ng_template_11_div_1_Template_button_click_1_listener","restoreView","_r11","ctx_r10","nextContext","resetView","handleMatchAll","template","NegotiationPageComponent_ng_template_11_div_1_ng_container_2_Template","NegotiationPageComponent_ng_template_11_div_1_ng_template_3_Template","templateRefExtractor","ctx_r6","isMatchAllLoading","_r8","NegotiationPageComponent_ng_template_11_Template_app_lot_match_table__isFullMatchEvent_0_listener","$event","_r13","ctx_r12","handleGetMatch","NegotiationPageComponent_ng_template_11_div_1_Template","ctx_r4","lotMatch","isLocked","counterPartyHasBroker","matchIterations","selectedIteration","hasSellerSubmittedMatch","hasBuyerSubmittedMatch","isComplete","isPending","isFullMatch","isSeller","buyerDetails","userVerificationId","sellerDetails","NegotiationPageComponent_div_13_div_1_Template_div_click_0_listener","_r20","ctx_r19","handleToggleNegotiations","NegotiationPageComponent_div_13_ng_container_2_button_9_Template_button_click_0_listener","_r29","ctx_r28","handleOpenSubmitYourMatchModal","NegotiationPageComponent_div_13_ng_container_2_button_9_ng_container_1_Template","NegotiationPageComponent_div_13_ng_container_2_button_9_ng_template_2_Template","classProp","ctx_r24","user","isBroker","brokerAdminRole","isSubmitMatchActionLoading","_r26","NegotiationPageComponent_div_13_ng_container_2_Template_button_click_5_listener","_r31","ctx_r30","handleDeclineNegotiation","NegotiationPageComponent_div_13_ng_container_2_ng_container_6_Template","NegotiationPageComponent_div_13_ng_container_2_ng_template_7_Template","NegotiationPageComponent_div_13_ng_container_2_button_9_Template","textInterpolate2","ctx_r15","negotiationIndex","activeNegotiationIds","length","propertyInterpolate","isDeclineNegotiationActionLoading","_r22","NegotiationPageComponent_div_13_div_5_Template_div_click_0_listener","_r33","ctx_r32","NegotiationPageComponent_div_13_div_1_Template","NegotiationPageComponent_div_13_ng_container_2_Template","NegotiationPageComponent_div_13_ng_template_3_Template","NegotiationPageComponent_div_13_div_5_Template","ctx_r5","submittedSkuduMatch","_r16","NegotiationPageComponent","constructor","route","location","dialog","actions$","store","router","isLoading","fromSuccess","submitModalIsOpen","iterationInitialID","iterationCurrentID","dateNow","transformDateToUtcHelper","Date","milliSecondsInASecond","hoursInADay","minutesInAnHour","SecondsInAMinute","hasActiveBroker","toggleForBroker","destroyed$","ngOnInit","fetchAgentInfoHelper","fetchClientInfoHelper","fetchAgentRequestHelper","selectBindingNegotiationDocument","params","pipe","subscribe","id","lotMatchId","handleBack","fetchBindingNegotiationDocumentHelper","queryParams","notificationUids","props","toggleForAgent","dispatch","notificationActions","ReqToggleNotificationStatus","url","snapshot","path","LotMatchFormDataSuccess","LotMatchFormDataFail","action$","checkSubmittedHelper","type","handleChangeIteration","getLotMatchFormData","x","lotMatchIterations","cropActions","ReqCropMonthsAndGrades","cropId","crop","exchangeId","exchange","getFilteredBrokers","response","ReqBrokersAndDistance_Shared","ReqClientBrokerRequests_Client","uid","activeBroker","completedDate","dDay","transformTimerDateHelper","dateDiff","getTime","ReqLotHasBrokerCheckSuccess","ReqLotHasBrokerCheckFail","payload","hasAgentDict","lotId","ReqLotMatchFormData","clientUid","negotiationActions","ReqGetAvailableMatchIds","negotiationSelector","getLotMatchIds","lotMatchIds","indexOf","countDownSubscription","getTimeDifferenceHelper","ngOnDestroy","next","unsubscribe","navigate","back","direction","activeNegotiationsLength","changeActiveNegotiationHelper","handleOpenUpdateModal","open","userType","lotName","ReqLotHasBrokerCheck","lotIds","handleSaveIteration","ReqUpdateLotMatch","UpdateLotMatchSuccess","UpdateLotMatchFail","dialogRef","panelClass","afterClosed","shouldDispatch","submitFullMatchHelper","handleOpenPaymentCheckModal","paymentReady","currentUserSubmitted","counterPartySubmitted","data","metricTons","quantity","paymentStepReady","paymentComplete","result","routeToSuccessPageHelper","currentAction","currentItem","DeclineNegotiationSuccess","DeclineNegotiationFail","action","ReqDeclineNegotiation","lotDetails","oppLotDetails","matchDetailsHelper","CompleteNegotiationSuccess","lotActions","ReqPrivatiseLots","createCorrectNegotiationDocument","createShallowNegotiationDocument","CompleteNegotiationFail","ReqCompleteNegotiation","clientHasBroker","bindingDocument","bindingNegotiationDocument","bindingNegotiationDocuments","sellerEmail","email","sellerPaid","buyerEmail","buyerPaid","ReqUpdateNegotiationDocument","brokerNegotiation","emailSent","ReqCreateNegotiationDocument","returnUserOrClientEmailHelper","triggerPaymentCheckModalHelper","brokerClient","item","hasOpposingPartySubmittedMatchHelper","hasOpposingPartySubmitted","timeDifference","allocateTimeUnitsHelper","Math","floor","daysToDday","compareSelectionsHelper","selection1","selection2","date","newDate","setHours","getHours","getUser","getCurrentClient","client","getNegotiationDocuments","negotiationDocs","ReqGetBrokerNegotiationDocuments","getBrokerRequest","agentRequest","_","directiveInject","i1","i2","i3","i4","i5","_2","selectors","decls","vars","consts","template","NegotiationPageComponent_Template","rf","ctx","NegotiationPageComponent_Template_img_click_2_listener","NegotiationPageComponent_div_7_Template","NegotiationPageComponent_div_8_Template","NegotiationPageComponent_div_10_Template","NegotiationPageComponent_ng_template_11_Template","NegotiationPageComponent_div_13_Template","textInterpolate1","_r3","RouterModule","NegotiationsComponent","routes","component","children","NegotiationsRoutingModule","_3","forChild","imports","exports","NegotiationsComponent_Template","CommonModule","EffectsModule","StoreModule","AngularMaterialModule","FormsModule","LotMatchTableModule","SubmitMatchModule","VerificationBadgeModule","NegotiationEditModalComponent","NegotiationEffects","lotFeatureKey","lotReducer","matchFeatureKey","matchReducer","negotiationFeatureKey","negotiationReducer","MatchEffects","LotEffects","MAT_DATE_LOCALE","GoogleMapsModule","NgxGpAutocompleteModule","NegotiationsModule","provide","useValue","forFeature","declarations","StoreFeatureModule","EffectsFeatureModule","MatLegacyButtonModule","MatButtonModule","MatLegacyDialogRef","MatDialogRef","MatIconModule","MatStepper","MatStepperModule","fromRoot","submitMatchContent","SubmitMatchComponent_img_3_Template_img_click_0_listener","_r6","ctx_r9","entity","name","SubmitMatchComponent_mat_step_12_p_7_Template","SubmitMatchComponent_mat_step_12_div_8_Template","_r1","selectedIndex","stepData_r8","stepperData","isLinear","isFinalStep","showMatch","getUserEntities","stepper","previous","handleNext","isFinalStepHelper","closeModalAndDispatchHelper","close","handleCloseModal","viewQuery","SubmitMatchComponent_Query","SubmitMatchComponent_img_3_Template","SubmitMatchComponent_Template_img_click_7_listener","SubmitMatchComponent_ng_template_10_Template","SubmitMatchComponent_ng_template_11_Template","SubmitMatchComponent_mat_step_12_Template","SubmitMatchComponent_Template_button_click_13_listener","asyncScheduler","timer","period","scheduler"],"sourceRoot":"webpack:///","x_google_ignoreList":[8]}